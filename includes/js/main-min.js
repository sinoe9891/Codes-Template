"use strict";function initSmoothScrolling(){function t(){function t(t){n(t.target)&&(t.stopPropagation(),t.preventDefault(),jump(t.target.hash,{duration:s,callback:function e(){o(t.target.hash)}}))}document.body.addEventListener("click",t,!1)}function e(){function t(t){t.stopPropagation(),t.preventDefault(),jump(t.target.hash,{duration:s})}[].slice.call(document.querySelectorAll("a")).filter(n).forEach(function(e){e.addEventListener("click",t,!1)})}function n(t){return"a"===t.tagName.toLowerCase()&&t.hash.length>0&&a(t.href)===c}function a(t){return t.slice(0,t.lastIndexOf("#"))}function i(){return"scrollBehavior"in document.documentElement.style}function o(t){var e=document.getElementById(t.substring(1));e&&(/^(?:a|select|input|button|textarea)$/i.test(e.tagName)||(e.tabIndex=-1),e.focus())}var s=400,c=location.hash?a(location.href):location.href;t()}function jump(t,e){function n(t){d=t-l,window.scrollTo(0,s.easing(d,o,c,r)),d<r?requestAnimationFrame(n):a()}function a(){window.scrollTo(0,o+c),"function"==typeof s.callback&&s.callback(),document.body.clientWidth>720?(ul.classList.remove("menu-open"),document.querySelector("#navToggle").classList.remove("open")):(nav.classList.remove("mobile-open"),document.querySelector("#navToggle").classList.remove("open"),contNav.classList.toggle("cont-nav-open"))}function i(t,e,n,a){return(t/=a/2)<1?n/2*t*t+e:(t--,-n/2*(t*(t-2)-1)+e)}var o=window.pageYOffset,s={duration:e.duration,offset:e.offset||0,callback:e.callback,easing:e.easing||i},c="string"==typeof t?s.offset+document.querySelector(t).getBoundingClientRect().top:t,r="function"==typeof s.duration?s.duration(c):s.duration,l,d;requestAnimationFrame(function(t){l=t,n(t)})}function restAPI(t){var e="https://richardmiddleton.me/wp-json/wp/v2/projects?categories="+t;cardCont.innerHTML='\n        <div class="spinner">\n            <div class="right-side">\n                <div class="bar"></div>\n            </div>\n            <div class="left-side">\n                <div class="bar"></div>\n            </div>\n        </div>',fetch(e).then(function(t){if(!t.ok)throw Error(t.statusText);return t}).then(function(t){return t.json()}).then(function(t){buildDom(t)}).catch(function(t){console.log(t)})}function buildDom(t){t&&(cardCont.innerHTML="");for(var e=0;e<t.length&&e<6;){var n=t[e].excerpt.rendered.substr(3),a=n.substr(0,n.length-5),i='<div class="card card-animation">\n    <a href="'+t[e].link+'">\n        <div class="card-image" style="background:url(\''+t[e].acf.image.sizes.medium+'\'); background-size:cover; background-position: center center;"></div>\n    </a>\n    <div class="card-text">\n        <a href="'+t[e].link+'">\n            <h4 class="h4-display">'+t[e].title.rendered+'</h4>\n        </a>\n        <p class="card-p">'+a+'</p>\n        <div class="card-text-more">\n        '+(t[e].acf.url?'<a href="'+t[e].acf.url+'" class="more" title="view">\n                <img src="includes/content/assets/img/view.svg" alt="view">\n            </a>':"")+"\n        "+(t[e].acf.github_url?'\n            <a href="'+t[e].acf.github_url+'" class="more" title="github">\n                <img src="includes/content/assets/img/git-view.svg" alt="github">\n            </a>\n            ':"")+'\n            <a href="'+t[e].link+'" class="more" title="Case Study">\n                <img src="includes/content/assets/img/case-view.svg" alt="case study">\n            </a>\n        </div>\n    </div>\n</div>';cardCont.innerHTML+=i,e++}}function instaAPI(){var t="178595410.7e82061.56428f51fa2d4779856bf0af509aa91c",e="https://api.instagram.com/v1/users/self/media/recent/?access_token="+t;fetch(e).then(function(t){if(200!==t.status)throw Error(t.statusText);return t}).then(function(t){return t.json()}).then(function(t){buildInsta(t)}).catch(function(t){console.log(t)})}function buildInsta(t){for(var e=0;e<8;e++){var n=t.data[e].images.thumbnail.url,a=t.data[e].link,i='<a href="'+a+'" target="_blank">\n            <div class="insta-grid-pic" style="background:url(\''+n+"'); background-size:cover; background-position: center center;\">\n\n            </div>\n        </a>";instaGrid.innerHTML+=i}}document.body.classList.contains("article")||document.querySelector(".hero-skew").classList.add("hero-animation");var toggle=document.querySelector("#navToggle"),ul=document.querySelector("nav ul"),nav=document.querySelector("nav"),aboutText=document.querySelectorAll(".about-container-text"),card=document.querySelectorAll(".card-container .card"),socialContainer=document.querySelector(".social-container"),liList=document.querySelectorAll("nav ul li"),contNav=document.querySelector("#container-nav"),cardCont=document.querySelector("#card-container"),filterClass=document.querySelectorAll(".filters-item"),instaGrid=document.querySelector("#insta-grid");if(toggle.addEventListener("click",function(t){t.preventDefault(),document.body.clientWidth>720?(ul.classList.toggle("menu-open"),document.querySelector("#navToggle").classList.toggle("open")):(nav.classList.toggle("mobile-open"),document.querySelector("#navToggle").classList.toggle("open"),contNav.classList.toggle("cont-nav-open"))}),window.addEventListener){var keys=[],konami="38,38,40,40,37,39,37,39,66,65,13";window.addEventListener("keydown",function(t){keys.push(t.keyCode),keys.toString().indexOf(konami)>=0&&(window.location="/wp-admin",keys=[])},!0)}if(!document.body.classList.contains("article")){var about=!1,cards=!1,social=!1;window.addEventListener("scroll",function(){function t(){for(var t=0;t<liList.length;t++)liList[t].firstElementChild.classList.remove("nav-active")}if(window.pageYOffset>180&&!about&&(aboutText[0].classList.toggle("about-animation"),about=!0),window.pageYOffset>1180&&!cards){var e=function t(){setTimeout(function(){card[n].classList.add("card-animation"),++n<card.length&&t()},250)},n=0;e(),cards=!0}window.pageYOffset>2080&&!social&&(socialContainer.classList.toggle("social-animation"),social=!0),window.pageYOffset<623?(t(),liList[0].firstElementChild.classList.add("nav-active")):window.pageYOffset>623&&window.pageYOffset<1400?(t(),liList[1].firstElementChild.classList.add("nav-active")):window.pageYOffset>1400&&window.pageYOffset<2535?(t(),liList[2].firstElementChild.classList.add("nav-active")):(t(),liList[3].firstElementChild.classList.add("nav-active"))})}initSmoothScrolling(),document.querySelector("#filters")&&document.querySelector("#filters").addEventListener("click",function(t){if(t.target&&t.target.matches(".filters-item")){for(var e=0;e<filterClass.length;e++)filterClass[e].classList.remove("active"),restAPI(t.target.getAttribute("data-key"));t.target.classList.add("active")}}),instaAPI();
